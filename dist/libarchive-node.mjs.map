{"version":3,"file":"libarchive-node.mjs","sources":["../node_modules/comlink/dist/esm/comlink.mjs","../../src/compressed-file.ts","../../src/utils.ts","../../src/archive-reader.ts","../../src/formats.ts","../../src/libarchive.ts","../../src/libarchive-node.ts","../node_modules/comlink/dist/esm/node-adapter.mjs"],"sourcesContent":["/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\nconst proxyMarker = Symbol(\"Comlink.proxy\");\nconst createEndpoint = Symbol(\"Comlink.endpoint\");\nconst releaseProxy = Symbol(\"Comlink.releaseProxy\");\nconst finalizer = Symbol(\"Comlink.finalizer\");\nconst throwMarker = Symbol(\"Comlink.thrown\");\nconst isObject = (val) => (typeof val === \"object\" && val !== null) || typeof val === \"function\";\n/**\n * Internal transfer handle to handle objects marked to proxy.\n */\nconst proxyTransferHandler = {\n    canHandle: (val) => isObject(val) && val[proxyMarker],\n    serialize(obj) {\n        const { port1, port2 } = new MessageChannel();\n        expose(obj, port1);\n        return [port2, [port2]];\n    },\n    deserialize(port) {\n        port.start();\n        return wrap(port);\n    },\n};\n/**\n * Internal transfer handler to handle thrown exceptions.\n */\nconst throwTransferHandler = {\n    canHandle: (value) => isObject(value) && throwMarker in value,\n    serialize({ value }) {\n        let serialized;\n        if (value instanceof Error) {\n            serialized = {\n                isError: true,\n                value: {\n                    message: value.message,\n                    name: value.name,\n                    stack: value.stack,\n                },\n            };\n        }\n        else {\n            serialized = { isError: false, value };\n        }\n        return [serialized, []];\n    },\n    deserialize(serialized) {\n        if (serialized.isError) {\n            throw Object.assign(new Error(serialized.value.message), serialized.value);\n        }\n        throw serialized.value;\n    },\n};\n/**\n * Allows customizing the serialization of certain values.\n */\nconst transferHandlers = new Map([\n    [\"proxy\", proxyTransferHandler],\n    [\"throw\", throwTransferHandler],\n]);\nfunction isAllowedOrigin(allowedOrigins, origin) {\n    for (const allowedOrigin of allowedOrigins) {\n        if (origin === allowedOrigin || allowedOrigin === \"*\") {\n            return true;\n        }\n        if (allowedOrigin instanceof RegExp && allowedOrigin.test(origin)) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction expose(obj, ep = globalThis, allowedOrigins = [\"*\"]) {\n    ep.addEventListener(\"message\", function callback(ev) {\n        if (!ev || !ev.data) {\n            return;\n        }\n        if (!isAllowedOrigin(allowedOrigins, ev.origin)) {\n            console.warn(`Invalid origin '${ev.origin}' for comlink proxy`);\n            return;\n        }\n        const { id, type, path } = Object.assign({ path: [] }, ev.data);\n        const argumentList = (ev.data.argumentList || []).map(fromWireValue);\n        let returnValue;\n        try {\n            const parent = path.slice(0, -1).reduce((obj, prop) => obj[prop], obj);\n            const rawValue = path.reduce((obj, prop) => obj[prop], obj);\n            switch (type) {\n                case \"GET\" /* MessageType.GET */:\n                    {\n                        returnValue = rawValue;\n                    }\n                    break;\n                case \"SET\" /* MessageType.SET */:\n                    {\n                        parent[path.slice(-1)[0]] = fromWireValue(ev.data.value);\n                        returnValue = true;\n                    }\n                    break;\n                case \"APPLY\" /* MessageType.APPLY */:\n                    {\n                        returnValue = rawValue.apply(parent, argumentList);\n                    }\n                    break;\n                case \"CONSTRUCT\" /* MessageType.CONSTRUCT */:\n                    {\n                        const value = new rawValue(...argumentList);\n                        returnValue = proxy(value);\n                    }\n                    break;\n                case \"ENDPOINT\" /* MessageType.ENDPOINT */:\n                    {\n                        const { port1, port2 } = new MessageChannel();\n                        expose(obj, port2);\n                        returnValue = transfer(port1, [port1]);\n                    }\n                    break;\n                case \"RELEASE\" /* MessageType.RELEASE */:\n                    {\n                        returnValue = undefined;\n                    }\n                    break;\n                default:\n                    return;\n            }\n        }\n        catch (value) {\n            returnValue = { value, [throwMarker]: 0 };\n        }\n        Promise.resolve(returnValue)\n            .catch((value) => {\n            return { value, [throwMarker]: 0 };\n        })\n            .then((returnValue) => {\n            const [wireValue, transferables] = toWireValue(returnValue);\n            ep.postMessage(Object.assign(Object.assign({}, wireValue), { id }), transferables);\n            if (type === \"RELEASE\" /* MessageType.RELEASE */) {\n                // detach and deactive after sending release response above.\n                ep.removeEventListener(\"message\", callback);\n                closeEndPoint(ep);\n                if (finalizer in obj && typeof obj[finalizer] === \"function\") {\n                    obj[finalizer]();\n                }\n            }\n        })\n            .catch((error) => {\n            // Send Serialization Error To Caller\n            const [wireValue, transferables] = toWireValue({\n                value: new TypeError(\"Unserializable return value\"),\n                [throwMarker]: 0,\n            });\n            ep.postMessage(Object.assign(Object.assign({}, wireValue), { id }), transferables);\n        });\n    });\n    if (ep.start) {\n        ep.start();\n    }\n}\nfunction isMessagePort(endpoint) {\n    return endpoint.constructor.name === \"MessagePort\";\n}\nfunction closeEndPoint(endpoint) {\n    if (isMessagePort(endpoint))\n        endpoint.close();\n}\nfunction wrap(ep, target) {\n    return createProxy(ep, [], target);\n}\nfunction throwIfProxyReleased(isReleased) {\n    if (isReleased) {\n        throw new Error(\"Proxy has been released and is not useable\");\n    }\n}\nfunction releaseEndpoint(ep) {\n    return requestResponseMessage(ep, {\n        type: \"RELEASE\" /* MessageType.RELEASE */,\n    }).then(() => {\n        closeEndPoint(ep);\n    });\n}\nconst proxyCounter = new WeakMap();\nconst proxyFinalizers = \"FinalizationRegistry\" in globalThis &&\n    new FinalizationRegistry((ep) => {\n        const newCount = (proxyCounter.get(ep) || 0) - 1;\n        proxyCounter.set(ep, newCount);\n        if (newCount === 0) {\n            releaseEndpoint(ep);\n        }\n    });\nfunction registerProxy(proxy, ep) {\n    const newCount = (proxyCounter.get(ep) || 0) + 1;\n    proxyCounter.set(ep, newCount);\n    if (proxyFinalizers) {\n        proxyFinalizers.register(proxy, ep, proxy);\n    }\n}\nfunction unregisterProxy(proxy) {\n    if (proxyFinalizers) {\n        proxyFinalizers.unregister(proxy);\n    }\n}\nfunction createProxy(ep, path = [], target = function () { }) {\n    let isProxyReleased = false;\n    const proxy = new Proxy(target, {\n        get(_target, prop) {\n            throwIfProxyReleased(isProxyReleased);\n            if (prop === releaseProxy) {\n                return () => {\n                    unregisterProxy(proxy);\n                    releaseEndpoint(ep);\n                    isProxyReleased = true;\n                };\n            }\n            if (prop === \"then\") {\n                if (path.length === 0) {\n                    return { then: () => proxy };\n                }\n                const r = requestResponseMessage(ep, {\n                    type: \"GET\" /* MessageType.GET */,\n                    path: path.map((p) => p.toString()),\n                }).then(fromWireValue);\n                return r.then.bind(r);\n            }\n            return createProxy(ep, [...path, prop]);\n        },\n        set(_target, prop, rawValue) {\n            throwIfProxyReleased(isProxyReleased);\n            // FIXME: ES6 Proxy Handler `set` methods are supposed to return a\n            // boolean. To show good will, we return true asynchronously ¯\\_(ツ)_/¯\n            const [value, transferables] = toWireValue(rawValue);\n            return requestResponseMessage(ep, {\n                type: \"SET\" /* MessageType.SET */,\n                path: [...path, prop].map((p) => p.toString()),\n                value,\n            }, transferables).then(fromWireValue);\n        },\n        apply(_target, _thisArg, rawArgumentList) {\n            throwIfProxyReleased(isProxyReleased);\n            const last = path[path.length - 1];\n            if (last === createEndpoint) {\n                return requestResponseMessage(ep, {\n                    type: \"ENDPOINT\" /* MessageType.ENDPOINT */,\n                }).then(fromWireValue);\n            }\n            // We just pretend that `bind()` didn’t happen.\n            if (last === \"bind\") {\n                return createProxy(ep, path.slice(0, -1));\n            }\n            const [argumentList, transferables] = processArguments(rawArgumentList);\n            return requestResponseMessage(ep, {\n                type: \"APPLY\" /* MessageType.APPLY */,\n                path: path.map((p) => p.toString()),\n                argumentList,\n            }, transferables).then(fromWireValue);\n        },\n        construct(_target, rawArgumentList) {\n            throwIfProxyReleased(isProxyReleased);\n            const [argumentList, transferables] = processArguments(rawArgumentList);\n            return requestResponseMessage(ep, {\n                type: \"CONSTRUCT\" /* MessageType.CONSTRUCT */,\n                path: path.map((p) => p.toString()),\n                argumentList,\n            }, transferables).then(fromWireValue);\n        },\n    });\n    registerProxy(proxy, ep);\n    return proxy;\n}\nfunction myFlat(arr) {\n    return Array.prototype.concat.apply([], arr);\n}\nfunction processArguments(argumentList) {\n    const processed = argumentList.map(toWireValue);\n    return [processed.map((v) => v[0]), myFlat(processed.map((v) => v[1]))];\n}\nconst transferCache = new WeakMap();\nfunction transfer(obj, transfers) {\n    transferCache.set(obj, transfers);\n    return obj;\n}\nfunction proxy(obj) {\n    return Object.assign(obj, { [proxyMarker]: true });\n}\nfunction windowEndpoint(w, context = globalThis, targetOrigin = \"*\") {\n    return {\n        postMessage: (msg, transferables) => w.postMessage(msg, targetOrigin, transferables),\n        addEventListener: context.addEventListener.bind(context),\n        removeEventListener: context.removeEventListener.bind(context),\n    };\n}\nfunction toWireValue(value) {\n    for (const [name, handler] of transferHandlers) {\n        if (handler.canHandle(value)) {\n            const [serializedValue, transferables] = handler.serialize(value);\n            return [\n                {\n                    type: \"HANDLER\" /* WireValueType.HANDLER */,\n                    name,\n                    value: serializedValue,\n                },\n                transferables,\n            ];\n        }\n    }\n    return [\n        {\n            type: \"RAW\" /* WireValueType.RAW */,\n            value,\n        },\n        transferCache.get(value) || [],\n    ];\n}\nfunction fromWireValue(value) {\n    switch (value.type) {\n        case \"HANDLER\" /* WireValueType.HANDLER */:\n            return transferHandlers.get(value.name).deserialize(value.value);\n        case \"RAW\" /* WireValueType.RAW */:\n            return value.value;\n    }\n}\nfunction requestResponseMessage(ep, msg, transfers) {\n    return new Promise((resolve) => {\n        const id = generateUUID();\n        ep.addEventListener(\"message\", function l(ev) {\n            if (!ev.data || !ev.data.id || ev.data.id !== id) {\n                return;\n            }\n            ep.removeEventListener(\"message\", l);\n            resolve(ev.data);\n        });\n        if (ep.start) {\n            ep.start();\n        }\n        ep.postMessage(Object.assign({ id }, msg), transfers);\n    });\n}\nfunction generateUUID() {\n    return new Array(4)\n        .fill(0)\n        .map(() => Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16))\n        .join(\"-\");\n}\n\nexport { createEndpoint, expose, finalizer, proxy, proxyMarker, releaseProxy, transfer, transferHandlers, windowEndpoint, wrap };\n//# sourceMappingURL=comlink.mjs.map\n",null,null,null,null,null,null,"/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\nfunction nodeEndpoint(nep) {\n    const listeners = new WeakMap();\n    return {\n        postMessage: nep.postMessage.bind(nep),\n        addEventListener: (_, eh) => {\n            const l = (data) => {\n                if (\"handleEvent\" in eh) {\n                    eh.handleEvent({ data });\n                }\n                else {\n                    eh({ data });\n                }\n            };\n            nep.on(\"message\", l);\n            listeners.set(eh, l);\n        },\n        removeEventListener: (_, eh) => {\n            const l = listeners.get(eh);\n            if (!l) {\n                return;\n            }\n            nep.off(\"message\", l);\n            listeners.delete(eh);\n        },\n        start: nep.start && nep.start.bind(nep),\n    };\n}\n\nexport { nodeEndpoint as default };\n//# sourceMappingURL=node-adapter.mjs.map\n"],"names":["proxyMarker","Symbol","createEndpoint","releaseProxy","finalizer","throwMarker","isObject","val","transferHandlers","Map","canHandle","serialize","obj","port1","port2","MessageChannel","expose","deserialize","port","start","wrap","value","serialized","Error","isError","message","name","stack","Object","assign","ep","globalThis","allowedOrigins","addEventListener","callback","ev","data","origin","allowedOrigin","RegExp","test","isAllowedOrigin","console","warn","id","type","path","argumentList","map","fromWireValue","returnValue","parent","slice","reduce","prop","rawValue","apply","proxy","transfers","transferCache","set","transfer","undefined","Promise","resolve","catch","then","wireValue","transferables","toWireValue","postMessage","removeEventListener","closeEndPoint","error","TypeError","endpoint","constructor","isMessagePort","close","target","createProxy","throwIfProxyReleased","isReleased","releaseEndpoint","requestResponseMessage","proxyCounter","WeakMap","proxyFinalizers","FinalizationRegistry","newCount","get","isProxyReleased","Proxy","_target","unregister","unregisterProxy","length","r","p","toString","bind","_thisArg","rawArgumentList","last","processArguments","construct","register","registerProxy","processed","v","arr","Array","prototype","concat","handler","serializedValue","msg","fill","Math","floor","random","Number","MAX_SAFE_INTEGER","join","l","CompressedFile","size","lastModified","archiveRef","this","_name","_size","_path","_lastModified","_archiveRef","extract","extractSingleFile","cloneContent","File","o","keys","objectToArray","files","key","push","file","getObjectPropReference","parts","split","pop","cur","prev","part","ArchiveReader","client","worker","_content","_processed","open","_","Comlink.proxy","_a","terminate","hasEncryptedData","usePassword","archivePassword","setLocale","locale","getFilesObject","listFiles","forEach","entry","fileName","getFilesArray","fileEntry","fileData","extractFiles","extractCallback","setTimeout","ArchiveFormat","ArchiveCompression","Archive","init","options","_options","getWorker","getClient","archiveReader","write","outputFileName","compression","format","passphrase","archiveData","writeArchive","Worker","workerUrl","URL","url","Client","createClient","call","Comlink.wrap","promise","clientReady","withResolvers","a","b","c","reject","__dirname","pathname","nep","listeners","eh","handleEvent","on","off","delete","nodeEndpoint"],"mappings":"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"}